<!DOCTYPE html>
<html>
<head>
	<title>Flashing - MediaTek System Recovery Mode</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>
<body>
	<div id="banner">
		MediaTek U-Boot System Recovery Mode
	</div>
	<div id="main">
		<p>Upgrading is in progressing, please wait ...</p>
		<p>This page may be in not responding status for a short time.</p>
        <progress id="progress-bar" value="0" max="100"></progress> <div id="progress-text">0%</div>  </div>
	</div>
	<script type="text/javascript">
		var interval = window.setInterval(function () {
            var xmlhttp = new XMLHttpRequest();
            xmlhttp.timeout = 300000;
            xmlhttp.open("GET", "/progress", true); // Запрос к /progress
            xmlhttp.send();
            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                    var progress = parseInt(xmlhttp.responseText);
                    document.getElementById("progress-bar").value = progress;
                    document.getElementById("progress-text").innerText = progress + "%"; 
                }
            }
        }, 1000);
	</script>
</body>
</html>
